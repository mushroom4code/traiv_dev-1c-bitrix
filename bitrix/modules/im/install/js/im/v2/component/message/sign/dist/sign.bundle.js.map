{"version":3,"file":"sign.bundle.js","sources":["../src/const/sign.js","../src/const/configurations.js","../src/sign.js"],"sourcesContent":["import { ButtonColor } from 'im.v2.component.elements';\n\nexport const Await = Object.freeze({\n\tinviteCompany: 'inviteCompany',\n\tinviteEmployeeSes: 'inviteEmployeeSes',\n\tinviteEmployeeTaxcom: 'inviteEmployeeTaxcom',\n\tinviteEmployeeGosKey: 'inviteEmployeeGosKey',\n\tinviteReviewer: 'inviteReviewer',\n\tinviteEditor: 'inviteEditor',\n});\n\nexport const Success = Object.freeze({\n\tdoneCompany: 'doneCompany',\n\tdoneEmployee: 'doneEmployee',\n\tdoneEmployeeGosKey: 'doneEmployeeGosKey',\n\tdoneFromAssignee: 'doneFromAssignee',\n\tdoneFromEditor: 'doneFromEditor',\n\tdoneFromReviewer: 'doneFromReviewer',\n});\n\nexport const Failure = Object.freeze({\n\trefusedCompany: 'refusedCompany',\n\temployeeStoppedToCompany: 'employeeStoppedToCompany',\n\tdocumentStopped: 'documentStopped',\n});\n\nexport type SignButtonParams = {\n\ttext: string,\n\tcallback: (...rest: any[]) => void,\n\tcolor: $Values<typeof ButtonColor>,\n}\n\nexport type SignMessageComponentParams = {\n\ttitle: (...rest: any[]) => string,\n\tdescription: (...rest: any[]) => string,\n\tbutton: SignButtonParams | null,\n};\n","import { Loc, Browser } from 'main.core';\n\nimport { ButtonColor } from 'im.v2.component.elements';\nimport { Await, Failure, Success } from './sign';\n\nexport const metaData = {\n\t[Await.inviteCompany]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_COMPANY_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_COMPANY_DESCRIPTION'),\n\t\tbutton: {\n\t\t\ttext: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_COMPANY_BUTTON_TEXT'),\n\t\t\tcallback: ({ user, document }) => {\n\t\t\t\tgoToPrimaryLink(document, true);\n\t\t\t},\n\t\t\tcolor: ButtonColor.Primary,\n\t\t},\n\t},\n\t[Await.inviteEmployeeSes]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_EMPLOYEE_SES_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_EMPLOYEE_SES_DESCRIPTION'),\n\t\tbutton: {\n\t\t\ttext: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_EMPLOYEE_SES_BUTTON_TEXT'),\n\t\t\tcallback: ({ user, document }) => {\n\t\t\t\tgoToPrimaryLink(document, true);\n\t\t\t},\n\t\t\tcolor: ButtonColor.Primary,\n\t\t},\n\t},\n\t[Await.inviteEmployeeTaxcom]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_EMPLOYEE_TAXCOM_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_EMPLOYEE_TAXCOM_DESCRIPTION'),\n\t\tbutton: {\n\t\t\ttext: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_EMPLOYEE_TAXCOM_BUTTON_TEXT'),\n\t\t\tcallback: ({ user, document }) => {\n\t\t\t\tgoToPrimaryLink(document, true);\n\t\t\t},\n\t\t\tcolor: ButtonColor.Primary,\n\t\t},\n\t},\n\t[Await.inviteEmployeeGosKey]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_EMPLOYEE_GOS_KEY_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_EMPLOYEE_GOS_KEY_DESCRIPTION'),\n\t\tbutton: null,\n\t},\n\t[Await.inviteReviewer]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_REVIEWER_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_REVIEWER_DESCRIPTION_MSGVER_1'),\n\t\tbutton: {\n\t\t\ttext: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_REVIEWER_BUTTON_TEXT'),\n\t\t\tcallback: ({ user, document }) => {\n\t\t\t\tgoToPrimaryLink(document, true);\n\t\t\t},\n\t\t\tcolor: ButtonColor.Primary,\n\t\t},\n\t},\n\t[Await.inviteEditor]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_EDITOR_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_EDITOR_DESCRIPTION'),\n\t\tbutton: {\n\t\t\ttext: Loc.getMessage('IM_MESSAGE_SIGN_INVITE_EDITOR_BUTTON_TEXT'),\n\t\t\tcallback: ({ user, document }) => {\n\t\t\t\tgoToPrimaryLink(document, true);\n\t\t\t},\n\t\t\tcolor: ButtonColor.Primary,\n\t\t},\n\t},\n\t[Success.doneCompany]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_DONE_COMPANY_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_DONE_COMPANY_DESCRIPTION'),\n\t\tbutton: {\n\t\t\ttext: Loc.getMessage('IM_MESSAGE_SIGN_DONE_COMPANY_BUTTON_TEXT'),\n\t\t\tcallback: ({ user, document }) => {\n\t\t\t\tgoToPrimaryLink(document, false);\n\t\t\t},\n\t\t\tcolor: ButtonColor.PrimaryBorder,\n\t\t},\n\t},\n\t[Success.doneEmployee]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_DONE_EMPLOYEE_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_DONE_EMPLOYEE_DESCRIPTION'),\n\t\tbutton: {\n\t\t\ttext: Loc.getMessage('IM_MESSAGE_SIGN_DONE_EMPLOYEE_BUTTON_TEXT'),\n\t\t\tcallback: ({ user, document }) => {\n\t\t\t\tgoToPrimaryLink(document, true);\n\t\t\t},\n\t\t\tcolor: ButtonColor.PrimaryBorder,\n\t\t},\n\t},\n\t[Success.doneEmployeeGosKey]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_DONE_EMPLOYEE_GOS_KEY_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_DONE_EMPLOYEE_GOS_KEY_DESCRIPTION'),\n\t\tbutton: {\n\t\t\ttext: Loc.getMessage('IM_MESSAGE_SIGN_DONE_EMPLOYEE_GOS_KEY_BUTTON_TEXT'),\n\t\t\tcallback: ({ user, document }) => {\n\t\t\t\tgoToPrimaryLink(document, true);\n\t\t\t},\n\t\t\tcolor: ButtonColor.PrimaryBorder,\n\t\t},\n\t},\n\t[Success.doneFromAssignee]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_DONE_FROM_ASSIGNEE_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_DONE_FROM_ASSIGNEE_DESCRIPTION'),\n\t\tbutton: null,\n\t},\n\t[Success.doneFromEditor]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_DONE_FROM_EDITOR_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_DONE_FROM_EDITOR_DESCRIPTION'),\n\t\tbutton: null,\n\t},\n\t[Success.doneFromReviewer]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_DONE_FROM_REVIEWER_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_DONE_FROM_REVIEWER_DESCRIPTION_MSGVER_1'),\n\t\tbutton: null,\n\t},\n\t[Failure.refusedCompany]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_REFUSED_COMPANY_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_REFUSED_COMPANY_DESCRIPTION'),\n\t\tbutton: null,\n\t},\n\t[Failure.employeeStoppedToCompany]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_EMPLOYEE_STOPPED_TO_COMPANY_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_EMPLOYEE_STOPPED_TO_COMPANY_DESCRIPTION'),\n\t\tbutton: null,\n\t},\n\t[Failure.documentStopped]: {\n\t\ttitle: Loc.getMessage('IM_MESSAGE_SIGN_DOCUMENT_STOPPED_TITLE'),\n\t\tdescription: Loc.getMessage('IM_MESSAGE_SIGN_DOCUMENT_STOPPED_DESCRIPTION'),\n\t\tbutton: null,\n\t},\n};\n\nfunction goToPrimaryLink(document: { link: string }, openInSlider: boolean = false)\n{\n\tif (document.link !== undefined)\n\t{\n\t\tif (!Browser.isMobile() && openInSlider)\n\t\t{\n\t\t\topenLinkInSlider(document.link);\n\t\t}\n\t\telse\n\t\t{\n\t\t\twindow.open(document.link);\n\t\t}\n\t}\n}\n\nfunction openLinkInSlider(link: string)\n{\n\tif (!isValidSigningLink(link))\n\t{\n\t\treturn;\n\t}\n\n\tBX.SidePanel.Instance.open('sign:stub:sign-link', {\n\t\twidth: 900,\n\t\tcacheable: false,\n\t\tallowCrossOrigin: true,\n\t\tallowCrossDomain: true,\n\t\tallowChangeHistory: false,\n\t\tnewWindowUrl: link,\n\t\tcopyLinkLabel: true,\n\t\tnewWindowLabel: true,\n\t\tloader: '/bitrix/js/intranet/sidepanel/bindings/images/sign_mask.svg',\n\t\tlabel: {\n\t\t\ttext: Loc.getMessage('IM_MESSAGE_SIGN_SIDEPANEL_BTN_SIGN'),\n\t\t\tbgColor: '#C48300',\n\t\t},\n\t\tcontentCallback(slider): Promise {\n\t\t\treturn BX.Runtime.loadExtension('sign.v2.b2e.sign-link').then((exports) => {\n\t\t\t\tconst memberIdFromLinkToSigning = /\\/sign\\/link\\/member\\/(\\d+)\\//i.exec(link);\n\n\t\t\t\treturn (new exports.SignLink({ memberId: memberIdFromLinkToSigning[1], slider }))\n\t\t\t\t\t.render()\n\t\t\t\t;\n\t\t\t});\n\t\t},\n\t});\n}\n\nfunction isValidSigningLink(link: string): boolean\n{\n\treturn /^\\/sign\\/link\\/member\\/\\d+\\/$/.test(link);\n}\n","import { Core } from 'im.v2.application.core';\nimport { Text } from 'main.core';\nimport { Utils } from 'im.v2.lib.utils';\n\nimport { BaseMessage } from 'im.v2.component.message.base';\nimport { Button as ButtonComponent, ButtonSize } from 'im.v2.component.elements';\nimport { MessageStatus } from 'im.v2.component.message.elements';\nimport { DefaultMessage } from 'im.v2.component.message.default';\n\nimport './css/sign.css';\nimport { Await, Failure, Success, SignButtonParams } from './const/sign';\nimport { metaData } from './const/configurations';\n\nimport type { ImModelMessage } from 'im.v2.model';\nimport type { SignMessageComponentParams } from './const/sign';\n\nconst PARAMS_KEY = {\n\tSTAGE_ID: 'stageId',\n\tUSER: 'user',\n\tDOCUMENT: 'document',\n\tHELP_ARTICLE: 'helpArticle',\n};\n\n// @vue/component\nexport const SignMessage = {\n\tname: 'SignMessage',\n\tcomponents: { ButtonComponent, BaseMessage, DefaultMessage, MessageStatus },\n\tprops: {\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tmessage(): ImModelMessage\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t\tButtonSize: () => ButtonSize,\n\t\tcomponentParams(): Object\n\t\t{\n\t\t\treturn this.message.componentParams;\n\t\t},\n\t\tstageId(): string\n\t\t{\n\t\t\treturn this.componentParams[PARAMS_KEY.STAGE_ID] ?? '';\n\t\t},\n\t\tuser(): ?Object\n\t\t{\n\t\t\treturn this.componentParams[PARAMS_KEY.USER];\n\t\t},\n\t\tdocument(): ?Object\n\t\t{\n\t\t\treturn this.componentParams[PARAMS_KEY.DOCUMENT];\n\t\t},\n\t\thelpArticle(): ?string\n\t\t{\n\t\t\treturn this.componentParams[PARAMS_KEY.HELP_ARTICLE] ?? '';\n\t\t},\n\t\tsignData(): SignMessageComponentParams\n\t\t{\n\t\t\tconst data = metaData[this.stageId];\n\t\t\tif (!data)\n\t\t\t{\n\t\t\t\tconsole.error('SignMessage: signData is undefined.');\n\t\t\t}\n\n\t\t\treturn data;\n\t\t},\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.signData?.title ?? '';\n\t\t},\n\t\tdescription(): string\n\t\t{\n\t\t\treturn this.signData?.description ?? '';\n\t\t},\n\t\tbutton(): ?SignButtonParams\n\t\t{\n\t\t\treturn this.signData?.button;\n\t\t},\n\t\tisAwaitSign(): boolean\n\t\t{\n\t\t\treturn Object.values(Await).includes(this.stageId);\n\t\t},\n\t\tisSuccessSign(): boolean\n\t\t{\n\t\t\treturn Object.values(Success).includes(this.stageId);\n\t\t},\n\t\tisFailureSign(): boolean\n\t\t{\n\t\t\treturn Object.values(Failure).includes(this.stageId);\n\t\t},\n\t\tisSelfMessage(): boolean\n\t\t{\n\t\t\treturn this.message.authorId === Core.getUserId();\n\t\t},\n\t\tcontainerClasses(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'--self': this.isSelfMessage,\n\t\t\t\t'--await': this.isAwaitSign,\n\t\t\t\t'--success': this.isSuccessSign,\n\t\t\t\t'--failure': this.isFailureSign,\n\t\t\t};\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\treplacePhrase(phrase: ?string): string\n\t\t{\n\t\t\tlet text = phrase ?? '';\n\t\t\tconst userLink = Utils.user.getProfileLink(this.user?.id);\n\t\t\tconst articleLink = `javascript: BX.Helper?.show('redirect=detail&code=${this.helpArticle}')`;\n\t\t\tconst LINK_CLASS = 'bx-im-message-sign__link';\n\t\t\tconst DOCUMENT_CLASS = 'bx-im-message-sign__document';\n\n\t\t\tconst phrases = {\n\t\t\t\t'#DOCUMENT_NAME#': `<span class=\"${DOCUMENT_CLASS}\">${Text.encode(this.document?.name)}</span>`,\n\t\t\t\t'#USER_LINK#': `<a href=\"${userLink}\" class=\"${LINK_CLASS}\">${Text.encode(this.user?.name)}</a>`,\n\t\t\t\t'[helpdesklink]': `<a href=\"${articleLink}\" class=\"${LINK_CLASS}\">`,\n\t\t\t\t'[/helpdesklink]': '</a>',\n\t\t\t};\n\n\t\t\tObject.keys(phrases).forEach((code) => {\n\t\t\t\ttext = text.replaceAll(code, phrases[code]);\n\t\t\t});\n\n\t\t\treturn text;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<DefaultMessage v-if=\"!signData\" :item=\"item\" :dialogId=\"dialogId\" />\n\t\t<BaseMessage\n\t\t\tv-else\n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:item=\"item\"\n\t\t\t:withContextMenu=\"false\"\n\t\t\t:withReactions=\"false\"\n\t\t\t:withBackground=\"false\"\n\t\t\tclass=\"bx-im-message-sign__scope\"\n\t\t>\n\t\t\t<div :class=\"['bx-im-message-sign__container', containerClasses]\">\n\t\t\t\t<div class=\"bx-im-message-sign__image\" />\n\t\t\t\t<div class=\"bx-im-message-sign__content\">\n\t\t\t\t\t<div class=\"bx-im-message-sign__title\">\n\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bx-im-message-sign__description\" v-html=\"replacePhrase(description)\" />\n\t\t\t\t\t<div class=\"bx-im-message-sign__buttons_container\">\n\t\t\t\t\t\t<ButtonComponent\n\t\t\t\t\t\t\tv-if=\"button\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.L\"\n\t\t\t\t\t\t\tisRounded\n\t\t\t\t\t\t\t:text=\"button.text\"\n\t\t\t\t\t\t\t:color=\"button.color\"\n\t\t\t\t\t\t\t@click=\"button.callback({ user, document })\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-message-sign__status_container\">\n\t\t\t\t\t<MessageStatus :item=\"message\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</BaseMessage>\n\t`,\n};\n"],"names":["Await","Object","freeze","inviteCompany","inviteEmployeeSes","inviteEmployeeTaxcom","inviteEmployeeGosKey","inviteReviewer","inviteEditor","Success","doneCompany","doneEmployee","doneEmployeeGosKey","doneFromAssignee","doneFromEditor","doneFromReviewer","Failure","refusedCompany","employeeStoppedToCompany","documentStopped","metaData","title","Loc","getMessage","description","button","text","callback","user","document","goToPrimaryLink","color","ButtonColor","Primary","PrimaryBorder","openInSlider","link","undefined","Browser","isMobile","openLinkInSlider","window","open","isValidSigningLink","BX","SidePanel","Instance","width","cacheable","allowCrossOrigin","allowCrossDomain","allowChangeHistory","newWindowUrl","copyLinkLabel","newWindowLabel","loader","label","bgColor","contentCallback","slider","Runtime","loadExtension","then","exports","memberIdFromLinkToSigning","exec","SignLink","memberId","render","test","PARAMS_KEY","STAGE_ID","USER","DOCUMENT","HELP_ARTICLE","SignMessage","name","components","ButtonComponent","BaseMessage","DefaultMessage","MessageStatus","props","item","type","required","dialogId","String","computed","message","ButtonSize","componentParams","stageId","helpArticle","signData","data","console","error","isAwaitSign","values","includes","isSuccessSign","isFailureSign","isSelfMessage","authorId","Core","getUserId","containerClasses","methods","replacePhrase","phrase","userLink","Utils","getProfileLink","id","articleLink","LINK_CLASS","DOCUMENT_CLASS","phrases","Text","encode","keys","forEach","code","replaceAll","template"],"mappings":"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"}