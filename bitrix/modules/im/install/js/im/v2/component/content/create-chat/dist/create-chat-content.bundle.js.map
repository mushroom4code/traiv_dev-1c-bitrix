{"version":3,"file":"create-chat-content.bundle.js","sources":["../src/components/elements/title-input.js","../src/components/elements/chat-avatar.js","../src/components/elements/chat-members.js","../src/components/elements/button-panel.js","../src/components/sections/section.js","../src/components/elements/textarea.js","../src/components/elements/radio.js","../src/components/sections/settings/settings-section.js","../src/components/sections/rights/owner.js","../src/components/sections/rights/managers.js","../src/components/sections/rights/dropdown-items.js","../src/components/sections/rights/rights-section.js","../src/components/sections/appearance/appearance-section.js","../src/components/group-chat.js","../src/components/sections/conference/conference-section.js","../src/components/conference.js","../src/components/sections/privacy/privacy-section.js","../src/components/channel.js","../src/create-chat-content.js"],"sourcesContent":["import type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const TitleInput = {\n\tname: 'TitleInput',\n\tprops:\n\t{\n\t\tmodelValue: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:modelValue'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tmounted()\n\t{\n\t\tthis.$refs.titleInput.focus();\n\t},\n\tmethods:\n\t{\n\t\tonInput(event: Event)\n\t\t{\n\t\t\tthis.$emit('update:modelValue', event.target.value);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__title_container\">\n\t\t\t<input\n\t\t\t\t:value=\"modelValue\"\n\t\t\t\t:placeholder=\"placeholder\"\n\t\t\t\t@input=\"onInput\"\n\t\t\t\tclass=\"bx-im-content-create-chat__title_input\"\n\t\t\t\tref=\"titleInput\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\n\nimport { ChatService } from 'im.v2.provider.service';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const ChatAvatar = {\n\tname: 'ChatAvatar',\n\tprops:\n\t{\n\t\tavatarFile: {\n\t\t\trequired: true,\n\t\t\tvalidator(value): boolean\n\t\t\t{\n\t\t\t\treturn (value instanceof File) || Type.isNull(value);\n\t\t\t},\n\t\t},\n\t\tchatTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsquared: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['avatarChange'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tpreparedAvatar(): string | null\n\t\t{\n\t\t\tif (!this.avatarFile)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn URL.createObjectURL(this.avatarFile);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonAvatarChangeClick()\n\t\t{\n\t\t\tthis.$refs.avatarInput.click();\n\t\t},\n\t\tasync onAvatarSelect(event: Event)\n\t\t{\n\t\t\tconst input: HTMLInputElement = event.target;\n\t\t\tconst file: File = input.files[0];\n\t\t\tif (!file)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst preparedAvatar = await this.getChatService().prepareAvatar(file);\n\t\t\tif (!preparedAvatar)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('avatarChange', preparedAvatar);\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__avatar_container\" :class=\"{'--squared': squared}\" @click=\"onAvatarChangeClick\">\n\t\t\t<img v-if=\"preparedAvatar\" class=\"bx-im-content-create-chat__avatar_image\" :src=\"preparedAvatar\" :alt=\"chatTitle\" />\n\t\t</div>\n\t\t<input type=\"file\" @change=\"onAvatarSelect\" accept=\"image/*\" class=\"bx-im-content-create-chat__avatar_input\" ref=\"avatarInput\">\n\t`,\n};\n","import { TagSelector } from 'ui.entity-selector';\n\nimport { Core } from 'im.v2.application.core';\n\n// @vue/component\nexport const ChatMembersSelector = {\n\tprops:\n\t{\n\t\tchatMembers: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['membersChange'],\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tcurrentUserId(): number\n\t\t{\n\t\t\treturn Core.getUserId();\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tconst members = this.chatMembers.map((userId: number) => {\n\t\t\treturn ['user', userId];\n\t\t});\n\t\tconst preselectedItems = [['user', this.currentUserId], ...members];\n\n\t\tthis.membersSelector = new TagSelector({\n\t\t\tmaxHeight: 99,\n\t\t\tplaceholder: '',\n\t\t\taddButtonCaption: this.loc('IM_CREATE_CHAT_USER_SELECTOR_ADD_MEMBERS'),\n\t\t\taddButtonCaptionMore: this.loc('IM_CREATE_CHAT_USER_SELECTOR_ADD_MEMBERS'),\n\t\t\tshowCreateButton: false,\n\t\t\tdialogOptions: {\n\t\t\t\tenableSearch: false,\n\t\t\t\tcontext: 'IM_CHAT_CREATE',\n\t\t\t\tentities: [\n\t\t\t\t\t{ id: 'user' },\n\t\t\t\t\t{ id: 'department' },\n\t\t\t\t],\n\t\t\t\tpreselectedItems,\n\t\t\t\tundeselectedItems: [['user', this.currentUserId]],\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonAfterTagAdd: (event) => {\n\t\t\t\t\tconst selector = event.getTarget();\n\t\t\t\t\tthis.$emit('membersChange', selector.getTags().map((tag) => tag.id));\n\t\t\t\t},\n\t\t\t\tonAfterTagRemove: (event) => {\n\t\t\t\t\tconst selector = event.getTarget();\n\t\t\t\t\tthis.$emit('membersChange', selector.getTags().map((tag) => tag.id));\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\tmounted()\n\t{\n\t\tthis.membersSelector.renderTo(this.$refs.members);\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__members\" ref=\"members\"></div>\n\t`,\n};\n","import { Button as MessengerButton, ButtonSize, ButtonColor } from 'im.v2.component.elements';\n\n// @vue/component\nexport const ButtonPanel = {\n\tcomponents: { MessengerButton },\n\tprops:\n\t{\n\t\tisCreating: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tcreateButtonTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['create', 'cancel'],\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tButtonColor: () => ButtonColor,\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__buttons\">\n\t\t\t<div class=\"bx-im-content-create-chat__buttons_create\">\n\t\t\t\t<MessengerButton\n\t\t\t\t\t:size=\"ButtonSize.XL\"\n\t\t\t\t\t:color=\"ButtonColor.Success\"\n\t\t\t\t\t:text=\"createButtonTitle\"\n\t\t\t\t\t:isLoading=\"isCreating\"\n\t\t\t\t\t:isDisabled=\"isCreating\"\n\t\t\t\t\t@click=\"$emit('create')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__buttons_cancel\">\n\t\t\t\t<MessengerButton\n\t\t\t\t\t:size=\"ButtonSize.XL\"\n\t\t\t\t\t:color=\"ButtonColor.Link\"\n\t\t\t\t\t:text=\"loc('IM_CREATE_CHAT_CANCEL')\"\n\t\t\t\t\t:isDisabled=\"isCreating\"\n\t\t\t\t\t@click=\"$emit('cancel')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { ExpandAnimation } from 'im.v2.component.animation';\n\nimport '../../css/section.css';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const CreateChatSection = {\n\tcomponents: { ExpandAnimation },\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\topenByDefault: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisOpened: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tcontainerClasses(): string[]\n\t\t{\n\t\t\treturn [`--${this.name}`, { '--active': this.isOpened }];\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tif (this.openByDefault)\n\t\t{\n\t\t\tthis.isOpened = true;\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tonContainerClick()\n\t\t{\n\t\t\tif (!this.isOpened)\n\t\t\t{\n\t\t\t\tthis.isOpened = true;\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"containerClasses\" class=\"bx-im-content-create-chat__section bx-im-content-create-chat__section_scope\">\n\t\t\t<div @click=\"isOpened = !isOpened\" class=\"bx-im-content-create-chat__section_header\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__section_left\">\n\t\t\t\t\t<div class=\"bx-im-content-create-chat__section_icon\"></div>\n\t\t\t\t\t<div class=\"bx-im-content-create-chat__section_text\">{{ title }}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-content-create-chat__section_right\"></div>\t\n\t\t\t</div>\n\t\t\t<ExpandAnimation>\n\t\t\t\t<div v-if=\"isOpened\" class=\"bx-im-content-create-chat__section_content_container\">\n\t\t\t\t\t<div class=\"bx-im-content-create-chat__section_content\">\n\t\t\t\t\t\t<slot></slot>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ExpandAnimation>\n\t\t</div>\n\t`,\n};\n","import '../../css/textarea.css';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const TextareaInput = {\n\tname: 'TextareaInput',\n\tprops:\n\t{\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tborder: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\trounded: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\temits: ['input'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tcontainerClasses(): { [className: string]: boolean }\n\t\t{\n\t\t\treturn { '--no-border': !this.border, '--rounded': this.rounded };\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonInput(event: Event)\n\t\t{\n\t\t\tthis.$emit('input', event.target.value);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__textarea_container\" :class=\"containerClasses\">\n\t\t\t<div class=\"ui-ctl ui-ctl-textarea ui-ctl-w100 ui-ctl-no-resize\">\n\t\t\t\t<textarea\n\t\t\t\t\t:value=\"value\"\n\t\t\t\t\t:placeholder=\"placeholder\"\n\t\t\t\t\t@input=\"onInput\"\n\t\t\t\t\tclass=\"bx-im-content-create-chat__textarea ui-ctl-element\"\n\t\t\t\t></textarea>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Text } from 'main.core';\n\nimport '../../css/radio.css';\n\nexport type RadioOptionItem = {\n\tvalue: OptionValue,\n\ttext: string,\n\tselected: boolean,\n\tsubtext?: string,\n\thtml?: boolean,\n};\n\ntype OptionValue = string | number | boolean;\n\n// @vue/component\nexport const RadioOption = {\n\tname: 'RadioOption',\n\tprops:\n\t{\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['change'],\n\tdata(): { groupName: string }\n\t{\n\t\treturn {\n\t\t\tgroupName: Text.getRandom(),\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\toptions(): RadioOptionItem[]\n\t\t{\n\t\t\treturn this.items;\n\t\t},\n\t\tselectedValue(): OptionValue\n\t\t{\n\t\t\treturn this.options.find((option) => {\n\t\t\t\treturn option.selected === true;\n\t\t\t});\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonInput(option: RadioOptionItem): void\n\t\t{\n\t\t\tthis.$emit('change', option.value);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat-radio__container\">\n\t\t\t<label v-for=\"option in options\" class=\"bx-im-content-create-chat-radio__item ui-ctl ui-ctl-radio\">\n\t\t\t\t<input type=\"radio\" class=\"ui-ctl-element\" :name=\"groupName\" :checked=\"option.selected\" @input=\"onInput(option)\">\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t<!-- Text -->\n\t\t\t\t\t<div v-if=\"option.html\" class=\"bx-im-content-create-chat-radio__label_title\" v-html=\"option.text\"></div>\n\t\t\t\t\t<div v-else class=\"bx-im-content-create-chat-radio__label_title\">{{ option.text }}</div>\n\t\t\t\t\t<!-- Subtext -->\n\t\t\t\t\t<template v-if=\"option.subtext\">\n\t\t\t\t\t\t<div v-if=\"option.html\" class=\"bx-im-content-create-chat-radio__label_subtitle\" v-html=\"option.subtext\"></div>\n\t\t\t\t\t\t<div v-else class=\"bx-im-content-create-chat-radio__label_subtitle\">{{ option.subtext }}</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</label>\n\t\t</div>\n\t`,\n};\n","import 'ui.forms';\n\nimport { Dropdown } from 'im.v2.component.elements';\n\nimport { CreateChatSection } from '../section';\nimport { TextareaInput } from '../../elements/textarea';\nimport { RadioOption, type RadioOptionItem } from '../../elements/radio';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const SettingsSection = {\n\tcomponents: { CreateChatSection, Dropdown, TextareaInput, RadioOption },\n\tprops: {\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\twithSearchOption: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tisAvailableInSearch: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['chatTypeChange', 'descriptionChange'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tprivacyOptions(): RadioOptionItem[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tvalue: false,\n\t\t\t\t\ttext: this.loc('IM_CREATE_CHAT_SETTINGS_SECTION_PRIVATE_TITLE'),\n\t\t\t\t\tsubtext: this.loc('IM_CREATE_CHAT_SETTINGS_SECTION_PRIVATE_SUBTITLE'),\n\t\t\t\t\tselected: !this.isAvailableInSearch,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: true,\n\t\t\t\t\ttext: this.loc('IM_CREATE_CHAT_SETTINGS_SECTION_OPEN_TITLE'),\n\t\t\t\t\tsubtext: this.loc('IM_CREATE_CHAT_SETTINGS_SECTION_OPEN_SUBTITLE'),\n\t\t\t\t\tselected: this.isAvailableInSearch,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tdescriptionPlaceholderText(): string\n\t\t{\n\t\t\treturn this.loc('IM_CREATE_CHAT_SETTINGS_SECTION_DESCRIPTION_PLACEHOLDER', {\n\t\t\t\t'#BR#': '\\n',\n\t\t\t\t'#QUOTE_START#': '\"',\n\t\t\t\t'#QUOTE_END#': '\"',\n\t\t\t});\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonTypeChange(isAvailableInSearch: boolean)\n\t\t{\n\t\t\tthis.$emit('chatTypeChange', isAvailableInSearch);\n\t\t},\n\t\tonDescriptionChange(description: string)\n\t\t{\n\t\t\tthis.$emit('descriptionChange', description);\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<CreateChatSection name=\"settings\" :title=\"loc('IM_CREATE_CHAT_SETTINGS_SECTION')\">\n\t\t\t<div v-if=\"withSearchOption\" class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_SETTINGS_SECTION_PRIVACY') }}\n\t\t\t\t</div>\n\t\t\t\t<RadioOption :items=\"privacyOptions\" @change=\"onTypeChange\" />\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">{{ loc('IM_CREATE_CHAT_SETTINGS_SECTION_DESCRIPTION') }}</div>\n\t\t\t\t<div class=\"bx-im-content-create-chat-settings__description_container\">\n\t\t\t\t\t<TextareaInput\n\t\t\t\t\t\t:value=\"description\"\n\t\t\t\t\t\t:placeholder=\"descriptionPlaceholderText\"\n\t\t\t\t\t\t:rounded=\"false\"\n\t\t\t\t\t\t@input=\"onDescriptionChange\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</CreateChatSection>\n\t`,\n};\n","import { TagSelector } from 'ui.entity-selector';\n\n// @vue/component\nexport const OwnerSelector = {\n\tname: 'OwnerSelector',\n\tprops:\n\t{\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['ownerChange'],\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcreated()\n\t{\n\t\tthis.membersSelector = new TagSelector({\n\t\t\tmultiple: false,\n\t\t\tmaxHeight: 33,\n\t\t\tplaceholder: '',\n\t\t\taddButtonCaption: this.loc('IM_CREATE_CHAT_USER_SELECTOR_CHANGE_OWNER'),\n\t\t\taddButtonCaptionMore: this.loc('IM_CREATE_CHAT_USER_SELECTOR_CHANGE_OWNER'),\n\t\t\tshowCreateButton: false,\n\t\t\tdialogOptions: {\n\t\t\t\tenableSearch: false,\n\t\t\t\tcontext: 'IM_CHAT_CREATE',\n\t\t\t\tentities: [\n\t\t\t\t\t{ id: 'user' },\n\t\t\t\t\t{ id: 'department' },\n\t\t\t\t],\n\t\t\t\tpreselectedItems: [['user', this.ownerId]],\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonBeforeTagAdd: (event) => {\n\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\ttag.setDeselectable(false);\n\t\t\t\t},\n\t\t\t\tonAfterTagAdd: (event) => {\n\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\tthis.$emit('ownerChange', tag.id);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\tmounted()\n\t{\n\t\tthis.membersSelector.renderTo(this.$refs.owner);\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__owner\" ref=\"owner\"></div>\n\t`,\n};\n","import { TagSelector } from 'ui.entity-selector';\n\nimport { Core } from 'im.v2.application.core';\n\n// @vue/component\nexport const ManagersSelector = {\n\tprops:\n\t{\n\t\tmanagerIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['managersChange'],\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tcurrentUserId(): number\n\t\t{\n\t\t\treturn Core.getUserId();\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tconst preselectedItems = this.managerIds.map((userId: number) => {\n\t\t\treturn ['user', userId];\n\t\t});\n\n\t\tthis.membersSelector = new TagSelector({\n\t\t\tmaxHeight: 99,\n\t\t\tplaceholder: '',\n\t\t\taddButtonCaption: this.loc('IM_CREATE_CHAT_RIGHTS_SECTION_ADD_MANAGERS'),\n\t\t\taddButtonCaptionMore: this.loc('IM_CREATE_CHAT_RIGHTS_SECTION_ADD_MANAGERS'),\n\t\t\tshowCreateButton: false,\n\t\t\tdialogOptions: {\n\t\t\t\tenableSearch: false,\n\t\t\t\tcontext: 'IM_CHAT_CREATE',\n\t\t\t\tentities: [\n\t\t\t\t\t{ id: 'user' },\n\t\t\t\t\t{ id: 'department' },\n\t\t\t\t],\n\t\t\t\tpreselectedItems,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonAfterTagAdd: (event) => {\n\t\t\t\t\tconst selector = event.getTarget();\n\t\t\t\t\tthis.$emit('managersChange', selector.getTags().map((tag) => tag.id));\n\t\t\t\t},\n\t\t\t\tonAfterTagRemove: (event) => {\n\t\t\t\t\tconst selector = event.getTarget();\n\t\t\t\t\tthis.$emit('managersChange', selector.getTags().map((tag) => tag.id));\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\tmounted()\n\t{\n\t\tthis.membersSelector.renderTo(this.$refs.managers);\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__managers\" ref=\"managers\"></div>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nimport { UserRole } from 'im.v2.const';\n\nimport type { DropdownItem } from 'im.v2.component.elements';\n\nexport const rightsDropdownItems: DropdownItem[] = [\n\t{\n\t\tvalue: UserRole.member,\n\t\ttext: Loc.getMessage('IM_CREATE_CHAT_RIGHTS_SECTION_ROLE_MEMBER'),\n\t},\n\t{\n\t\tvalue: UserRole.manager,\n\t\ttext: Loc.getMessage('IM_CREATE_CHAT_RIGHTS_SECTION_ROLE_MANAGER'),\n\t},\n\t{\n\t\tvalue: UserRole.owner,\n\t\ttext: Loc.getMessage('IM_CREATE_CHAT_RIGHTS_SECTION_ROLE_OWNER'),\n\t\tdefault: true,\n\t},\n];\n","import { Dropdown } from 'im.v2.component.elements';\nimport { UserRole, PopupType } from 'im.v2.const';\n\nimport { CreateChatSection } from '../section';\nimport { OwnerSelector } from './owner';\nimport { ManagersSelector } from './managers';\nimport { rightsDropdownItems } from './dropdown-items';\n\nimport type { JsonObject } from 'main.core';\nimport type { DropdownItem } from 'im.v2.component.elements';\n\ntype UserRoleItem = $Keys<typeof UserRole>;\n\n// @vue/component\nexport const RightsSection = {\n\tcomponents: { CreateChatSection, Dropdown, OwnerSelector, ManagersSelector },\n\tprops: {\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tmanagerIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmanageUsersAdd: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmanageUsersDelete: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmanageSettings: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmanageUi: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmanageMessages: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['ownerChange', 'managersChange', 'manageUsersAddChange', 'manageUsersDeleteChange', 'manageUiChange', 'manageMessagesChange'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tPopupType: () => PopupType,\n\t\tmanageUsersAddItems(): DropdownItem[]\n\t\t{\n\t\t\treturn rightsDropdownItems.map((item) => {\n\t\t\t\tif (item.value === this.manageUsersAdd)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\tdefault: true,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn { ...item };\n\t\t\t});\n\t\t},\n\t\tmanageUsersDeleteItems(): DropdownItem[]\n\t\t{\n\t\t\treturn rightsDropdownItems.map((item) => {\n\t\t\t\tif (item.value === this.manageUsersDelete)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\tdefault: true,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn { ...item };\n\t\t\t});\n\t\t},\n\t\tmanageUiItems(): DropdownItem[]\n\t\t{\n\t\t\treturn rightsDropdownItems.map((item) => {\n\t\t\t\tif (item.value === this.manageUi)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\tdefault: true,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn { ...item };\n\t\t\t});\n\t\t},\n\t\tmanageMessagesItems(): DropdownItem[]\n\t\t{\n\t\t\treturn rightsDropdownItems.map((item) => {\n\t\t\t\tif (item.value === this.manageMessages)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\tdefault: true,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn { ...item };\n\t\t\t});\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonOwnerChange(ownerId: number)\n\t\t{\n\t\t\tthis.$emit('ownerChange', ownerId);\n\t\t},\n\t\tonManagersChange(managerIds: number[])\n\t\t{\n\t\t\tthis.$emit('managersChange', managerIds);\n\t\t},\n\t\tonManageUsersAddChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.$emit('manageUsersAddChange', newValue);\n\t\t},\n\t\tonManageUsersDeleteChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.$emit('manageUsersDeleteChange', newValue);\n\t\t},\n\t\tonManageUiChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.$emit('manageUiChange', newValue);\n\t\t},\n\t\tonManageMessagesChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.$emit('manageMessagesChange', newValue);\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<CreateChatSection name=\"rights\" :title=\"loc('IM_CREATE_CHAT_RIGHTS_SECTION')\">\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_SETTINGS_SECTION_OWNER') }}\n\t\t\t\t</div>\n\t\t\t\t<OwnerSelector :ownerId=\"ownerId\" @ownerChange=\"onOwnerChange\" />\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_RIGHTS_SECTION_MANAGERS') }}\n\t\t\t\t</div>\n\t\t\t\t<ManagersSelector :managerIds=\"managerIds\" @managersChange=\"onManagersChange\" />\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_RIGHTS_SECTION_MANAGE_USERS_ADD') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-content-create-chat-settings__manage-select\">\n\t\t\t\t\t<Dropdown :items=\"manageUsersAddItems\" :id=\"PopupType.createChatManageUsersAddMenu\" @itemChange=\"onManageUsersAddChange\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_RIGHTS_SECTION_MANAGE_USERS_DELETE') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-content-create-chat-settings__manage-select\">\n\t\t\t\t\t<Dropdown :items=\"manageUsersDeleteItems\" :id=\"PopupType.createChatManageUsersDeleteMenu\" @itemChange=\"onManageUsersDeleteChange\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_RIGHTS_SECTION_MANAGE_UI_MSGVER_2') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-content-create-chat-settings__manage-select\">\n\t\t\t\t\t<Dropdown :items=\"manageUiItems\" :id=\"PopupType.createChatManageUiMenu\" @itemChange=\"onManageUiChange\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_RIGHTS_SECTION_MANAGE_SENDING_MSGVER_1') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-content-create-chat-settings__manage-select\">\n\t\t\t\t\t<Dropdown :items=\"manageMessagesItems\" :id=\"PopupType.createChatManageMessagesMenu\" @itemChange=\"onManageMessagesChange\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</CreateChatSection>\n\t`,\n};","import { CreateChatSection } from '../section';\n\n// @vue/component\nexport const AppearanceSection = {\n\tcomponents: { CreateChatSection },\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\ttemplate: `\n\t\t<Section name=\"appearance\" title=\"Appearance\" />\n\t`,\n};\n","import 'ui.notification';\n\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MenuManager } from 'main.popup';\n\nimport { Messenger } from 'im.public';\nimport { Core } from 'im.v2.application.core';\nimport { CreateChatManager } from 'im.v2.lib.create-chat';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { ChatService } from 'im.v2.provider.service';\nimport { UserRole, PopupType, ChatType, EventType, Layout, type OnLayoutChangeEvent } from 'im.v2.const';\n\nimport { TitleInput } from './elements/title-input';\nimport { ChatAvatar } from './elements/chat-avatar';\nimport { ChatMembersSelector } from './elements/chat-members';\nimport { ButtonPanel } from './elements/button-panel';\nimport { SettingsSection } from './sections/settings/settings-section';\nimport { RightsSection } from './sections/rights/rights-section';\nimport { AppearanceSection } from './sections/appearance/appearance-section';\n\nimport type { JsonObject } from 'main.core';\n\ntype UserRoleItem = $Keys<typeof UserRole>;\n\n// @vue/component\nexport const GroupChatCreation = {\n\tname: 'GroupChatCreation',\n\tcomponents: {\n\t\tTitleInput,\n\t\tChatAvatar,\n\t\tChatMembersSelector,\n\t\tSettingsSection,\n\t\tRightsSection,\n\t\tAppearanceSection,\n\t\tButtonPanel,\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisCreating: false,\n\t\t\tavatarFile: null,\n\t\t\tchatTitle: '',\n\t\t\tchatMembers: [],\n\t\t\tsettings: {\n\t\t\t\tisAvailableInSearch: false,\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t\trights: {\n\t\t\t\townerId: 0,\n\t\t\t\tmanagerIds: [],\n\t\t\t\tmanageUsersAdd: '',\n\t\t\t\tmanageUsersDelete: '',\n\t\t\t\tmanageSettings: '',\n\t\t\t\tmanageUi: '',\n\t\t\t\tmanageMessages: '',\n\t\t\t},\n\t\t};\n\t},\n\twatch:\n\t{\n\t\tchatTitle(newValue)\n\t\t{\n\t\t\tCreateChatManager.getInstance().setChatTitle(newValue);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tEventEmitter.subscribe(EventType.layout.onLayoutChange, this.onLayoutChange);\n\n\t\tthis.rights.ownerId = Core.getUserId();\n\t\tthis.initDefaultRolesForRights();\n\n\t\tthis.restoreFields();\n\t\tCreateChatManager.getInstance().setChatType(ChatType.chat);\n\t\tCreateChatManager.getInstance().setCreationStatus(true);\n\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tif (this.exitByCancel || this.exitByChatTypeSwitch || this.exitByCreation)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.saveFields();\n\t},\n\tmethods:\n\t{\n\t\tonMembersChange(currentTags: number[])\n\t\t{\n\t\t\tthis.chatMembers = currentTags;\n\t\t},\n\t\tonOwnerChange(ownerId: number)\n\t\t{\n\t\t\tthis.rights.ownerId = ownerId;\n\t\t},\n\t\tonManagersChange(managerIds: number[])\n\t\t{\n\t\t\tthis.rights.managerIds = managerIds;\n\t\t},\n\t\tonChatTypeChange(isAvailableInSearch: boolean)\n\t\t{\n\t\t\tthis.settings.isAvailableInSearch = isAvailableInSearch;\n\t\t},\n\t\tonDescriptionChange(description: string)\n\t\t{\n\t\t\tthis.settings.description = description;\n\t\t},\n\t\tonManageUsersAddChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersAdd = newValue;\n\t\t},\n\t\tonManageUsersDeleteChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersDelete = newValue;\n\t\t},\n\t\tonManageUiChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUi = newValue;\n\t\t},\n\t\tonManageMessagesChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageMessages = newValue;\n\t\t},\n\t\tasync onCreateClick()\n\t\t{\n\t\t\tthis.isCreating = true;\n\n\t\t\tconst { newDialogId } = await this.getChatService().createChat({\n\t\t\t\ttitle: this.chatTitle,\n\t\t\t\tavatar: this.avatarFile,\n\t\t\t\tmembers: this.chatMembers,\n\t\t\t\townerId: this.rights.ownerId,\n\t\t\t\tmanagers: this.rights.managerIds,\n\t\t\t\tisAvailableInSearch: this.settings.isAvailableInSearch,\n\t\t\t\tdescription: this.settings.description,\n\t\t\t\tmanageUsersAdd: this.rights.manageUsersAdd,\n\t\t\t\tmanageUsersDelete: this.rights.manageUsersDelete,\n\t\t\t\tmanageUi: this.rights.manageUi,\n\t\t\t\tmanageSettings: this.rights.manageSettings,\n\t\t\t\tmanageMessages: this.rights.manageMessages,\n\t\t\t}).catch(() => {\n\t\t\t\tthis.isCreating = false;\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.loc('IM_CREATE_CHAT_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.isCreating = false;\n\t\t\tthis.exitByCreation = true;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tvoid Messenger.openChat(newDialogId);\n\t\t},\n\t\tonCancelClick()\n\t\t{\n\t\t\tthis.exitByCancel = true;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tMessenger.openChat();\n\t\t},\n\t\tonAvatarChange(newAvatarFile: File)\n\t\t{\n\t\t\tthis.avatarFile = newAvatarFile;\n\t\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t\t},\n\t\tonScroll()\n\t\t{\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersAddMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersDeleteMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUiMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageMessagesMenu)?.close();\n\t\t},\n\t\tonLayoutChange(event: BaseEvent<OnLayoutChangeEvent>)\n\t\t{\n\t\t\tconst { to } = event.getData();\n\t\t\tif (to.name === Layout.createChat.name && to.entityId !== ChatType.chat)\n\t\t\t{\n\t\t\t\tthis.exitByChatTypeSwitch = true;\n\t\t\t}\n\t\t},\n\t\tsaveFields()\n\t\t{\n\t\t\tCreateChatManager.getInstance().saveFields({\n\t\t\t\tchatTitle: this.chatTitle,\n\t\t\t\tavatarFile: this.avatarFile,\n\t\t\t\tchatMembers: this.chatMembers,\n\t\t\t\tsettings: this.settings,\n\t\t\t\trights: this.rights,\n\t\t\t});\n\t\t},\n\t\trestoreFields()\n\t\t{\n\t\t\tconst savedFields = CreateChatManager.getInstance().getFields();\n\t\t\tif (!savedFields)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { chatTitle, avatarFile, chatMembers, settings, rights } = savedFields;\n\t\t\tthis.chatTitle = chatTitle;\n\t\t\tthis.avatarFile = avatarFile;\n\t\t\tthis.chatMembers = chatMembers;\n\t\t\tthis.settings = settings;\n\t\t\tthis.rights = rights;\n\t\t},\n\t\tinitDefaultRolesForRights()\n\t\t{\n\t\t\tconst {\n\t\t\t\tmanageUsersAdd,\n\t\t\t\tmanageUsersDelete,\n\t\t\t\tmanageUi,\n\t\t\t\tmanageSettings,\n\t\t\t\tmanageMessages,\n\t\t\t} = PermissionManager.getInstance().getDefaultRolesForActionGroups();\n\n\t\t\tthis.rights.manageUsersAdd = manageUsersAdd;\n\t\t\tthis.rights.manageUsersDelete = manageUsersDelete;\n\t\t\tthis.rights.manageUi = manageUi;\n\t\t\tthis.rights.manageSettings = manageSettings;\n\t\t\tthis.rights.manageMessages = manageMessages;\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__content\" @scroll=\"onScroll\">\n\t\t\t<div class=\"bx-im-content-create-chat__header\">\n\t\t\t\t<ChatAvatar :avatarFile=\"avatarFile\" :chatTitle=\"chatTitle\" @avatarChange=\"onAvatarChange\" />\n\t\t\t\t<TitleInput v-model=\"chatTitle\" :placeholder=\"loc('IM_CREATE_CHAT_TITLE_PLACEHOLDER')\" />\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__members_container\">\n\t\t\t\t<ChatMembersSelector :chatMembers=\"chatMembers\" @membersChange=\"onMembersChange\" />\n\t\t\t</div>\n\t\t\t<SettingsSection\n\t\t\t\t:isAvailableInSearch=\"settings.isAvailableInSearch\"\n\t\t\t\t:description=\"settings.description\"\n\t\t\t\t@chatTypeChange=\"onChatTypeChange\"\n\t\t\t\t@descriptionChange=\"onDescriptionChange\"\n\t\t\t/>\n\t\t\t<RightsSection\n\t\t\t\t:ownerId=\"rights.ownerId\"\n\t\t\t\t:managerIds=\"rights.managerIds\"\n\t\t\t\t:manageUsersAdd=\"rights.manageUsersAdd\"\n\t\t\t\t:manageUsersDelete=\"rights.manageUsersDelete\"\n\t\t\t\t:manageUi=\"rights.manageUi\"\n\t\t\t\t:manageSettings=\"rights.manageSettings\"\n\t\t\t\t:manageMessages=\"rights.manageMessages\"\n\t\t\t\t@ownerChange=\"onOwnerChange\"\n\t\t\t\t@managersChange=\"onManagersChange\"\n\t\t\t\t@manageUsersAddChange=\"onManageUsersAddChange\"\n\t\t\t\t@manageUsersDeleteChange=\"onManageUsersDeleteChange\"\n\t\t\t\t@manageUiChange=\"onManageUiChange\"\n\t\t\t\t@manageMessagesChange=\"onManageMessagesChange\"\n\t\t\t/> \n\t\t</div>\n\t\t<ButtonPanel\n\t\t\t:isCreating=\"isCreating\"\n\t\t\t:createButtonTitle=\"loc('IM_CREATE_CHAT_CONFIRM')\"\n\t\t\t@create=\"onCreateClick\"\n\t\t\t@cancel=\"onCancelClick\"\n\t\t/>\n\t`,\n};\n","import 'ui.forms';\n\nimport { Dropdown, Toggle, ToggleSize } from 'im.v2.component.elements';\n\nimport { CreateChatSection } from '../section';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const ConferenceSection = {\n\tcomponents: { CreateChatSection, Dropdown, Toggle },\n\tprops: {\n\t\tpasswordNeeded: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tpassword: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['passwordNeededChange', 'passwordChange'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tToggleSize: () => ToggleSize,\n\t},\n\tmethods:\n\t{\n\t\tonPasswordNeededChange(passwordNeeded: boolean)\n\t\t{\n\t\t\tthis.$emit('passwordNeededChange', passwordNeeded);\n\t\t},\n\t\tonPasswordChange(event: Event)\n\t\t{\n\t\t\tthis.$emit('passwordChange', event.target.value);\n\t\t},\n\t\tonToggleLabelClick()\n\t\t{\n\t\t\tthis.onPasswordNeededChange(!this.passwordNeeded);\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<CreateChatSection name=\"conference\" :title=\"loc('IM_CREATE_CHAT_CONFERENCE_SECTION')\">\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_CONFERENCE_SECTION_PRIVACY') }}\n\t\t\t\t</div>\n\t\t\t\t<div @click=\"onToggleLabelClick\" class=\"bx-im-content-create-chat-settings__type-select\">\n\t\t\t\t\t<Toggle :size=\"ToggleSize.M\" :isEnabled=\"passwordNeeded\" />\n\t\t\t\t\t<div class=\"bx-im-content-create-chat-settings__type-select_label\">\n\t\t\t\t\t\t{{ loc('IM_CREATE_CHAT_CONFERENCE_SECTION_USE_PASSWORD') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"passwordNeeded\" class=\"bx-im-content-create-chat-conference__password-container ui-ctl ui-ctl-textbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclass=\"bx-im-content-create-chat-conference__password-input ui-ctl-element\"\n\t\t\t\t\t\t:value=\"password\"\n\t\t\t\t\t\t:placeholder=\"loc('IM_CREATE_CHAT_CONFERENCE_SECTION_PASSWORD_PLACEHOLDER')\"\n\t\t\t\t\t\t@input=\"onPasswordChange\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</CreateChatSection>\n\t`,\n};\n","import 'ui.notification';\n\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MenuManager } from 'main.popup';\n\nimport { Messenger } from 'im.public';\nimport { Core } from 'im.v2.application.core';\nimport { CreateChatManager } from 'im.v2.lib.create-chat';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { ChatService } from 'im.v2.provider.service';\nimport { UserRole, PopupType, ChatType, EventType, Layout } from 'im.v2.const';\n\nimport { TitleInput } from './elements/title-input';\nimport { ChatAvatar } from './elements/chat-avatar';\nimport { ChatMembersSelector } from './elements/chat-members';\nimport { ButtonPanel } from './elements/button-panel';\nimport { SettingsSection } from './sections/settings/settings-section';\nimport { RightsSection } from './sections/rights/rights-section';\nimport { AppearanceSection } from './sections/appearance/appearance-section';\nimport { ConferenceSection } from './sections/conference/conference-section';\n\nimport type { JsonObject } from 'main.core';\nimport type { OnLayoutChangeEvent } from 'im.v2.const';\n\ntype UserRoleItem = $Keys<typeof UserRole>;\n\n// @vue/component\nexport const ConferenceCreation = {\n\tname: 'ConferenceCreation',\n\tcomponents: {\n\t\tTitleInput,\n\t\tChatAvatar,\n\t\tChatMembersSelector,\n\t\tSettingsSection,\n\t\tRightsSection,\n\t\tAppearanceSection,\n\t\tConferenceSection,\n\t\tButtonPanel,\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisCreating: false,\n\t\t\tavatarFile: null,\n\t\t\tchatTitle: '',\n\t\t\tchatMembers: [],\n\t\t\tconference: {\n\t\t\t\tpasswordNeeded: false,\n\t\t\t\tpassword: '',\n\t\t\t},\n\t\t\tsettings: {\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t\trights: {\n\t\t\t\townerId: 0,\n\t\t\t\tmanagerIds: [],\n\t\t\t\tmanageUsersAdd: '',\n\t\t\t\tmanageUsersDelete: '',\n\t\t\t\tmanageSettings: '',\n\t\t\t\tmanageUi: '',\n\t\t\t\tmanageMessages: '',\n\t\t\t},\n\t\t};\n\t},\n\twatch:\n\t{\n\t\tchatTitle(newValue)\n\t\t{\n\t\t\tCreateChatManager.getInstance().setChatTitle(newValue);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tEventEmitter.subscribe(EventType.layout.onLayoutChange, this.onLayoutChange);\n\n\t\tthis.rights.ownerId = Core.getUserId();\n\t\tthis.initDefaultRolesForRights();\n\n\t\tthis.restoreFields();\n\t\tCreateChatManager.getInstance().setChatType(ChatType.videoconf);\n\t\tCreateChatManager.getInstance().setCreationStatus(true);\n\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tif (this.exitByCancel || this.exitByChatTypeSwitch)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.saveFields();\n\t},\n\tmethods:\n\t{\n\t\tonMembersChange(currentTags: number[])\n\t\t{\n\t\t\tthis.chatMembers = currentTags;\n\t\t},\n\t\tonOwnerChange(ownerId: number)\n\t\t{\n\t\t\tthis.rights.ownerId = ownerId;\n\t\t},\n\t\tonManagersChange(managerIds: number[])\n\t\t{\n\t\t\tthis.rights.managerIds = managerIds;\n\t\t},\n\t\tonDescriptionChange(description: string)\n\t\t{\n\t\t\tthis.settings.description = description;\n\t\t},\n\t\tonManageUsersAddChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersAdd = newValue;\n\t\t},\n\t\tonManageUsersDeleteChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersDelete = newValue;\n\t\t},\n\t\tonManageUiChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUi = newValue;\n\t\t},\n\t\tonManageMessagesChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageMessages = newValue;\n\t\t},\n\t\tonAvatarChange(newAvatarFile: File)\n\t\t{\n\t\t\tthis.avatarFile = newAvatarFile;\n\t\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t\t},\n\t\tonPasswordNeededChange(passwordNeeded: boolean)\n\t\t{\n\t\t\tthis.conference.passwordNeeded = passwordNeeded;\n\t\t},\n\t\tonPasswordChange(newPassword: string)\n\t\t{\n\t\t\tthis.conference.password = newPassword;\n\t\t},\n\t\tasync onCreateClick()\n\t\t{\n\t\t\tif (!this.checkPassword())\n\t\t\t{\n\t\t\t\tthis.showPasswordError();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isCreating = true;\n\n\t\t\tconst { newDialogId } = await this.getChatService().createChat({\n\t\t\t\tentityType: ChatType.videoconf,\n\t\t\t\ttitle: this.chatTitle,\n\t\t\t\tavatar: this.avatarFile,\n\t\t\t\tmembers: this.chatMembers,\n\t\t\t\townerId: this.rights.ownerId,\n\t\t\t\tmanagers: this.rights.managerIds,\n\t\t\t\tdescription: this.settings.description,\n\t\t\t\tmanageUsersAdd: this.rights.manageUsersAdd,\n\t\t\t\tmanageUsersDelete: this.rights.manageUsersDelete,\n\t\t\t\tmanageUi: this.rights.manageUi,\n\t\t\t\tmanageSettings: this.rights.manageSettings,\n\t\t\t\tmanageMessages: this.rights.manageMessages,\n\t\t\t\tconferencePassword: this.conference.passwordNeeded ? this.conference.password : '',\n\t\t\t}).catch(() => {\n\t\t\t\tthis.isCreating = false;\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.loc('IM_CREATE_CHAT_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.isCreating = false;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tvoid Messenger.openChat(newDialogId);\n\t\t},\n\t\tonCancelClick()\n\t\t{\n\t\t\tthis.exitByCancel = true;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tMessenger.openChat();\n\t\t},\n\t\tonScroll()\n\t\t{\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersAddMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersDeleteMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUiMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageMessagesMenu)?.close();\n\t\t},\n\t\tonLayoutChange(event: BaseEvent<OnLayoutChangeEvent>)\n\t\t{\n\t\t\tconst { to } = event.getData();\n\t\t\tif (to.name === Layout.createChat.name && to.entityId !== ChatType.videoconf)\n\t\t\t{\n\t\t\t\tthis.exitByChatTypeSwitch = true;\n\t\t\t}\n\t\t},\n\t\tsaveFields()\n\t\t{\n\t\t\tCreateChatManager.getInstance().saveFields({\n\t\t\t\tchatTitle: this.chatTitle,\n\t\t\t\tavatarFile: this.avatarFile,\n\t\t\t\tchatMembers: this.chatMembers,\n\t\t\t\tsettings: this.settings,\n\t\t\t\trights: this.rights,\n\t\t\t\tconference: this.conference,\n\t\t\t});\n\t\t},\n\t\trestoreFields()\n\t\t{\n\t\t\tconst savedFields = CreateChatManager.getInstance().getFields();\n\t\t\tif (!savedFields)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { chatTitle, avatarFile, chatMembers, conference, settings, rights } = savedFields;\n\t\t\tthis.chatTitle = chatTitle;\n\t\t\tthis.avatarFile = avatarFile;\n\t\t\tthis.chatMembers = chatMembers;\n\t\t\tthis.conference = conference;\n\t\t\tthis.settings = settings;\n\t\t\tthis.rights = rights;\n\t\t},\n\t\tinitDefaultRolesForRights()\n\t\t{\n\t\t\tconst {\n\t\t\t\tmanageUsersAdd,\n\t\t\t\tmanageUsersDelete,\n\t\t\t\tmanageUi,\n\t\t\t\tmanageSettings,\n\t\t\t\tmanageMessages,\n\t\t\t} = PermissionManager.getInstance().getDefaultRolesForActionGroups();\n\n\t\t\tthis.rights.manageUsersAdd = manageUsersAdd;\n\t\t\tthis.rights.manageUsersDelete = manageUsersDelete;\n\t\t\tthis.rights.manageUi = manageUi;\n\t\t\tthis.rights.manageSettings = manageSettings;\n\t\t\tthis.rights.manageMessages = manageMessages;\n\t\t},\n\t\tcheckPassword(): boolean\n\t\t{\n\t\t\tconst PASSWORD_MIN_LENGTH = 3;\n\t\t\tif (!this.conference.passwordNeeded)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst password = this.conference.password.trim();\n\n\t\t\treturn password !== '' && password.length >= PASSWORD_MIN_LENGTH;\n\t\t},\n\t\tshowPasswordError()\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: this.loc('IM_CREATE_CHAT_CONFERENCE_PASSWORD_ERROR'),\n\t\t\t});\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__content\" @scroll=\"onScroll\">\n\t\t\t<div class=\"bx-im-content-create-chat__header\">\n\t\t\t\t<ChatAvatar :avatarFile=\"avatarFile\" :chatTitle=\"chatTitle\" @avatarChange=\"onAvatarChange\" :squared=\"true\" />\n\t\t\t\t<TitleInput v-model=\"chatTitle\" :placeholder=\"loc('IM_CREATE_CONFERENCE_TITLE_PLACEHOLDER')\" />\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__members_container\">\n\t\t\t\t<ChatMembersSelector :chatMembers=\"chatMembers\" @membersChange=\"onMembersChange\" />\n\t\t\t</div>\n\t\t\t<ConferenceSection\n\t\t\t\t:passwordNeeded=\"conference.passwordNeeded\"\n\t\t\t\t:password=\"conference.password\"\n\t\t\t\t@passwordNeededChange=\"onPasswordNeededChange\"\n\t\t\t\t@passwordChange=\"onPasswordChange\"\n\t\t\t/>\n\t\t\t<SettingsSection\n\t\t\t\t:withSearchOption=\"false\"\n\t\t\t\t:description=\"settings.description\"\n\t\t\t\t@descriptionChange=\"onDescriptionChange\"\n\t\t\t/>\n\t\t\t<RightsSection\n\t\t\t\t:ownerId=\"rights.ownerId\"\n\t\t\t\t:managerIds=\"rights.managerIds\"\n\t\t\t\t:manageUsersAdd=\"rights.manageUsersAdd\"\n\t\t\t\t:manageUsersDelete=\"rights.manageUsersDelete\"\n\t\t\t\t:manageUi=\"rights.manageUi\"\n\t\t\t\t:manageSettings=\"rights.manageSettings\"\n\t\t\t\t:manageMessages=\"rights.manageMessages\"\n\t\t\t\t@ownerChange=\"onOwnerChange\"\n\t\t\t\t@managersChange=\"onManagersChange\"\n\t\t\t\t@manageUsersAddChange=\"onManageUsersAddChange\"\n\t\t\t\t@manageUsersDeleteChange=\"onManageUsersDeleteChange\"\n\t\t\t\t@manageUiChange=\"onManageUiChange\"\n\t\t\t\t@manageMessagesChange=\"onManageMessagesChange\"\n\t\t\t/>\n\t\t</div>\n\t\t<ButtonPanel\n\t\t\t:isCreating=\"isCreating\"\n\t\t\t:createButtonTitle=\"loc('IM_CREATE_CONFERENCE_CONFIRM')\"\n\t\t\t@create=\"onCreateClick\"\n\t\t\t@cancel=\"onCancelClick\"\n\t\t/>\n\t`,\n};\n","import 'ui.forms';\n\nimport { CreateChatSection } from '../section';\nimport { RadioOption, type RadioOptionItem } from '../../elements/radio';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const PrivacySection = {\n\tcomponents: { CreateChatSection, RadioOption },\n\tprops: {\n\t\twithSearchOption: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tisAvailableInSearch: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['chatTypeChange'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tprivacyOptions(): RadioOptionItem[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tvalue: true,\n\t\t\t\t\ttext: this.loc('IM_CREATE_CHAT_PRIVACY_SECTION_OPEN_TITLE'),\n\t\t\t\t\tsubtext: this.loc('IM_CREATE_CHAT_PRIVACY_SECTION_OPEN_SUBTITLE'),\n\t\t\t\t\tselected: this.isAvailableInSearch,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: false,\n\t\t\t\t\ttext: this.loc('IM_CREATE_CHAT_PRIVACY_SECTION_PRIVATE_TITLE'),\n\t\t\t\t\tsubtext: this.loc('IM_CREATE_CHAT_PRIVACY_SECTION_PRIVATE_SUBTITLE'),\n\t\t\t\t\tselected: !this.isAvailableInSearch,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonTypeChange(isAvailableInSearch: boolean)\n\t\t{\n\t\t\tthis.$emit('chatTypeChange', isAvailableInSearch);\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<CreateChatSection name=\"privacy\" :title=\"loc('IM_CREATE_CHAT_PRIVACY_SECTION')\" :openByDefault=\"true\">\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<RadioOption :items=\"privacyOptions\" @change=\"onTypeChange\" />\n\t\t\t</div>\n\t\t</CreateChatSection>\n\t`,\n};\n","import 'ui.notification';\n\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MenuManager } from 'main.popup';\n\nimport { Messenger } from 'im.public';\nimport { Core } from 'im.v2.application.core';\nimport { CreateChatManager } from 'im.v2.lib.create-chat';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { ChatService } from 'im.v2.provider.service';\nimport { UserRole, PopupType, ChatType, EventType, Layout, type OnLayoutChangeEvent } from 'im.v2.const';\n\nimport { TitleInput } from './elements/title-input';\nimport { ChatAvatar } from './elements/chat-avatar';\nimport { ChatMembersSelector } from './elements/chat-members';\nimport { ButtonPanel } from './elements/button-panel';\nimport { TextareaInput } from './elements/textarea';\nimport { SettingsSection } from './sections/settings/settings-section';\nimport { RightsSection } from './sections/rights/rights-section';\nimport { AppearanceSection } from './sections/appearance/appearance-section';\nimport { PrivacySection } from './sections/privacy/privacy-section';\n\nimport '../css/create-channel.css';\n\nimport type { JsonObject } from 'main.core';\n\ntype UserRoleItem = $Keys<typeof UserRole>;\n\n// @vue/component\nexport const ChannelCreation = {\n\tname: 'ChannelCreation',\n\tcomponents: {\n\t\tTitleInput,\n\t\tChatAvatar,\n\t\tChatMembersSelector,\n\t\tSettingsSection,\n\t\tRightsSection,\n\t\tAppearanceSection,\n\t\tPrivacySection,\n\t\tButtonPanel,\n\t\tTextareaInput,\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisCreating: false,\n\t\t\tavatarFile: null,\n\t\t\tchatTitle: '',\n\t\t\tchatMembers: [],\n\t\t\tsettings: {\n\t\t\t\tisAvailableInSearch: true,\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t\trights: {\n\t\t\t\townerId: 0,\n\t\t\t\tmanagerIds: [],\n\t\t\t\tmanageUsersAdd: '',\n\t\t\t\tmanageUsersDelete: '',\n\t\t\t\tmanageSettings: '',\n\t\t\t\tmanageUi: '',\n\t\t\t\tmanageMessages: '',\n\t\t\t},\n\t\t};\n\t},\n\twatch:\n\t{\n\t\tchatTitle(newValue)\n\t\t{\n\t\t\tCreateChatManager.getInstance().setChatTitle(newValue);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tEventEmitter.subscribe(EventType.layout.onLayoutChange, this.onLayoutChange);\n\n\t\tthis.rights.ownerId = Core.getUserId();\n\t\tthis.initDefaultRolesForRights();\n\n\t\tthis.restoreFields();\n\t\tCreateChatManager.getInstance().setChatType(ChatType.channel);\n\t\tCreateChatManager.getInstance().setCreationStatus(true);\n\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tEventEmitter.unsubscribe(EventType.layout.onLayoutChange, this.onLayoutChange);\n\n\t\tif (this.exitByCancel || this.exitByChatTypeSwitch || this.exitByCreation)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.saveFields();\n\t},\n\tmethods:\n\t{\n\t\tonMembersChange(currentTags: number[])\n\t\t{\n\t\t\tthis.chatMembers = currentTags;\n\t\t},\n\t\tonOwnerChange(ownerId: number)\n\t\t{\n\t\t\tthis.rights.ownerId = ownerId;\n\t\t},\n\t\tonManagersChange(managerIds: number[])\n\t\t{\n\t\t\tthis.rights.managerIds = managerIds;\n\t\t},\n\t\tonChatTypeChange(isAvailableInSearch: boolean)\n\t\t{\n\t\t\tthis.settings.isAvailableInSearch = isAvailableInSearch;\n\t\t},\n\t\tonDescriptionChange(description: string)\n\t\t{\n\t\t\tthis.settings.description = description;\n\t\t},\n\t\tonManageUsersAddChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersAdd = newValue;\n\t\t},\n\t\tonManageUsersDeleteChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersDelete = newValue;\n\t\t},\n\t\tonManageUiChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUi = newValue;\n\t\t},\n\t\tonManageMessagesChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageMessages = newValue;\n\t\t},\n\t\tasync onCreateClick()\n\t\t{\n\t\t\tthis.isCreating = true;\n\n\t\t\tconst { newDialogId } = await this.getChatService().createChat({\n\t\t\t\ttype: ChatType.channel,\n\t\t\t\ttitle: this.chatTitle,\n\t\t\t\tavatar: this.avatarFile,\n\t\t\t\tmembers: this.chatMembers,\n\t\t\t\townerId: this.rights.ownerId,\n\t\t\t\tmanagers: this.rights.managerIds,\n\t\t\t\tisAvailableInSearch: this.settings.isAvailableInSearch,\n\t\t\t\tdescription: this.settings.description,\n\t\t\t\tmanageUsersAdd: this.rights.manageUsersAdd,\n\t\t\t\tmanageUsersDelete: this.rights.manageUsersDelete,\n\t\t\t\tmanageUi: this.rights.manageUi,\n\t\t\t\tmanageSettings: this.rights.manageSettings,\n\t\t\t\tmanageMessages: this.rights.manageMessages,\n\t\t\t}).catch(() => {\n\t\t\t\tthis.isCreating = false;\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.loc('IM_CREATE_CHAT_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.isCreating = false;\n\t\t\tthis.exitByCreation = true;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tvoid Messenger.openChat(newDialogId);\n\t\t},\n\t\tonCancelClick()\n\t\t{\n\t\t\tthis.exitByCancel = true;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tMessenger.openChat();\n\t\t},\n\t\tonAvatarChange(newAvatarFile: File)\n\t\t{\n\t\t\tthis.avatarFile = newAvatarFile;\n\t\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t\t},\n\t\tonScroll()\n\t\t{\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersAddMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersDeleteMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUiMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageMessagesMenu)?.close();\n\t\t},\n\t\tonLayoutChange(event: BaseEvent<OnLayoutChangeEvent>)\n\t\t{\n\t\t\tconst { to } = event.getData();\n\t\t\tif (to.name === Layout.createChat.name && to.entityId !== ChatType.channel)\n\t\t\t{\n\t\t\t\tthis.exitByChatTypeSwitch = true;\n\t\t\t}\n\t\t},\n\t\tsaveFields()\n\t\t{\n\t\t\tCreateChatManager.getInstance().saveFields({\n\t\t\t\tchatTitle: this.chatTitle,\n\t\t\t\tavatarFile: this.avatarFile,\n\t\t\t\tchatMembers: this.chatMembers,\n\t\t\t\tsettings: this.settings,\n\t\t\t\trights: this.rights,\n\t\t\t});\n\t\t},\n\t\trestoreFields()\n\t\t{\n\t\t\tconst savedFields = CreateChatManager.getInstance().getFields();\n\t\t\tif (!savedFields)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { chatTitle, avatarFile, chatMembers, settings, rights } = savedFields;\n\t\t\tthis.chatTitle = chatTitle;\n\t\t\tthis.avatarFile = avatarFile;\n\t\t\tthis.chatMembers = chatMembers;\n\t\t\tthis.settings = settings;\n\t\t\tthis.rights = rights;\n\t\t},\n\t\tinitDefaultRolesForRights()\n\t\t{\n\t\t\tconst {\n\t\t\t\tmanageUsersAdd,\n\t\t\t\tmanageUsersDelete,\n\t\t\t\tmanageUi,\n\t\t\t\tmanageSettings,\n\t\t\t\tmanageMessages,\n\t\t\t} = PermissionManager.getInstance().getDefaultRolesForActionGroups(ChatType.channel);\n\n\t\t\tthis.rights.manageUsersAdd = manageUsersAdd;\n\t\t\tthis.rights.manageUsersDelete = manageUsersDelete;\n\t\t\tthis.rights.manageUi = manageUi;\n\t\t\tthis.rights.manageSettings = manageSettings;\n\t\t\tthis.rights.manageMessages = manageMessages;\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__content\" @scroll=\"onScroll\">\n\t\t\t<div class=\"bx-im-content-create-chat__header\">\n\t\t\t\t<ChatAvatar :avatarFile=\"avatarFile\" :chatTitle=\"chatTitle\" @avatarChange=\"onAvatarChange\" :squared=\"true\" />\n\t\t\t\t<TitleInput v-model=\"chatTitle\" :placeholder=\"loc('IM_CREATE_CHANNEL_TITLE_PLACEHOLDER')\" />\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-channel__description_container\">\n\t\t\t\t<TextareaInput\n\t\t\t\t\t:value=\"settings.description\"\n\t\t\t\t\t:placeholder=\"loc('IM_CREATE_CHANNEL_DESCRIPTION_PLACEHOLDER')\"\n\t\t\t\t\t:border=\"false\"\n\t\t\t\t\t@input=\"onDescriptionChange\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<PrivacySection\n\t\t\t\t:isAvailableInSearch=\"settings.isAvailableInSearch\"\n\t\t\t\t@chatTypeChange=\"onChatTypeChange\"\n\t\t\t/>\n\t\t\t<RightsSection\n\t\t\t\t:ownerId=\"rights.ownerId\"\n\t\t\t\t:managerIds=\"rights.managerIds\"\n\t\t\t\t:manageUsersAdd=\"rights.manageUsersAdd\"\n\t\t\t\t:manageUsersDelete=\"rights.manageUsersDelete\"\n\t\t\t\t:manageUi=\"rights.manageUi\"\n\t\t\t\t:manageSettings=\"rights.manageSettings\"\n\t\t\t\t:manageMessages=\"rights.manageMessages\"\n\t\t\t\t@ownerChange=\"onOwnerChange\"\n\t\t\t\t@managersChange=\"onManagersChange\"\n\t\t\t\t@manageUsersAddChange=\"onManageUsersAddChange\"\n\t\t\t\t@manageUsersDeleteChange=\"onManageUsersDeleteChange\"\n\t\t\t\t@manageUiChange=\"onManageUiChange\"\n\t\t\t\t@manageMessagesChange=\"onManageMessagesChange\"\n\t\t\t/>\n\t\t\t<div class=\"bx-im-content-create-channel__members_container\">\n\t\t\t\t<ChatMembersSelector :chatMembers=\"chatMembers\" @membersChange=\"onMembersChange\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<ButtonPanel\n\t\t\t:isCreating=\"isCreating\"\n\t\t\t:createButtonTitle=\"loc('IM_CREATE_CHANNEL_CONFIRM')\"\n\t\t\t@create=\"onCreateClick\"\n\t\t\t@cancel=\"onCancelClick\"\n\t\t/>\n\t`,\n};\n","import { ChatType } from 'im.v2.const';\n\nimport { GroupChatCreation } from './components/group-chat';\nimport { ConferenceCreation } from './components/conference';\nimport { ChannelCreation } from './components/channel';\n\nimport './css/create-chat-content.css';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const CreateChatContent = {\n\tname: 'CreateChatContent',\n\tcomponents: { GroupChatCreation, ConferenceCreation, ChannelCreation },\n\tprops:\n\t{\n\t\tentityId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tChatType: () => ChatType,\n\t\tchatType(): $Values<typeof ChatType>\n\t\t{\n\t\t\treturn this.entityId;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__container bx-im-content-create-chat__scope\">\n\t\t\t<GroupChatCreation v-if=\"chatType === ChatType.chat\" />\n\t\t\t<ConferenceCreation v-else-if=\"chatType === ChatType.videoconf\" />\n\t\t\t<ChannelCreation v-else-if=\"chatType === ChatType.channel\" />\n\t\t</div>\n\t`,\n};\n"],"names":["TitleInput","name","props","modelValue","type","String","default","placeholder","required","emits","data","mounted","$refs","titleInput","focus","methods","onInput","event","$emit","target","value","template","ChatAvatar","avatarFile","validator","File","Type","isNull","chatTitle","squared","Boolean","computed","preparedAvatar","URL","createObjectURL","onAvatarChangeClick","avatarInput","click","onAvatarSelect","input","file","files","getChatService","prepareAvatar","chatService","ChatService","ChatMembersSelector","chatMembers","Array","currentUserId","Core","getUserId","created","members","map","userId","preselectedItems","membersSelector","TagSelector","maxHeight","addButtonCaption","loc","addButtonCaptionMore","showCreateButton","dialogOptions","enableSearch","context","entities","id","undeselectedItems","events","onAfterTagAdd","selector","getTarget","getTags","tag","onAfterTagRemove","renderTo","phraseCode","$Bitrix","Loc","getMessage","ButtonPanel","components","MessengerButton","isCreating","createButtonTitle","ButtonSize","ButtonColor","CreateChatSection","ExpandAnimation","title","openByDefault","isOpened","containerClasses","onContainerClick","TextareaInput","border","rounded","RadioOption","items","groupName","Text","getRandom","options","selectedValue","find","option","selected","SettingsSection","Dropdown","description","withSearchOption","isAvailableInSearch","privacyOptions","text","subtext","descriptionPlaceholderText","onTypeChange","onDescriptionChange","replacements","OwnerSelector","ownerId","Number","multiple","onBeforeTagAdd","getData","setDeselectable","owner","ManagersSelector","managerIds","managers","rightsDropdownItems","UserRole","member","manager","RightsSection","manageUsersAdd","manageUsersDelete","manageSettings","manageUi","manageMessages","PopupType","manageUsersAddItems","item","manageUsersDeleteItems","manageUiItems","manageMessagesItems","onOwnerChange","onManagersChange","onManageUsersAddChange","newValue","onManageUsersDeleteChange","onManageUiChange","onManageMessagesChange","AppearanceSection","GroupChatCreation","settings","rights","watch","CreateChatManager","getInstance","setChatTitle","EventEmitter","subscribe","EventType","layout","onLayoutChange","initDefaultRolesForRights","restoreFields","setChatType","ChatType","chat","setCreationStatus","setChatAvatar","beforeUnmount","exitByCancel","exitByChatTypeSwitch","exitByCreation","saveFields","onMembersChange","currentTags","onChatTypeChange","onCreateClick","newDialogId","createChat","avatar","catch","BX","UI","Notification","Center","notify","content","Messenger","openChat","onCancelClick","onAvatarChange","newAvatarFile","onScroll","MenuManager","getMenuById","createChatManageUsersAddMenu","close","createChatManageUsersDeleteMenu","createChatManageUiMenu","createChatManageMessagesMenu","to","Layout","entityId","savedFields","getFields","PermissionManager","getDefaultRolesForActionGroups","ConferenceSection","Toggle","passwordNeeded","password","ToggleSize","onPasswordNeededChange","onPasswordChange","onToggleLabelClick","ConferenceCreation","conference","videoconf","newPassword","checkPassword","showPasswordError","entityType","conferencePassword","PASSWORD_MIN_LENGTH","trim","length","PrivacySection","ChannelCreation","channel","unsubscribe","CreateChatContent","chatType"],"mappings":"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"}